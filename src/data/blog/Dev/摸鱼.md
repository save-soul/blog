---
title: ç¨‹åºå®ç°å¿«é€Ÿåˆ‡å±ï¼Œå¯ç”¨äºæ‘¸é±¼
pubDatetime: 2025-06-30T20:49:00+08:00
description: æ‘¸é±¼æ˜¯æ‰“å·¥äººå¯¹æŠ—èµ„æœ¬å®¶æ¦¨å–å‰©ä½™ä»·å€¼çš„æ‰‹æ®µï¼Œæ‰“å·¥äººçš„å†å²å°±æ˜¯ä¸€éƒ¨æ‘¸é±¼å²ğŸ¶ã€‚å½“æˆ‘ä»¬åœ¨æ‘¸é±¼æ—¶ï¼Œé¢†å¯¼æ¥äº†ï¼Œéœ€è¦å¿«é€Ÿåˆ‡å±æ—¶ï¼Œéœ€è¦ç”¨åˆ°å¿«æ·é”®ï¼Œä½†å¯èƒ½ä¸€é”®åˆ‡å±æ›´ä¸ºæ–¹ä¾¿ã€‚æ‰€ä»¥æˆ‘ç”¨robotgoå®ç°äº†Windowsä¸‹ä¸€é”®åˆ‡å±çš„åŠŸèƒ½ã€‚
category: å¼€å‘
slug: quick-desktop-switch
tags:
- æ‘¸é±¼
- Goè¯­è¨€
- è‡ªåŠ¨åŒ–
---

æ‘¸é±¼æ˜¯æ‰“å·¥äººå¯¹æŠ—èµ„æœ¬å®¶æ¦¨å–å‰©ä½™ä»·å€¼çš„æ‰‹æ®µï¼Œæ‰“å·¥äººçš„å†å²å°±æ˜¯ä¸€éƒ¨æ‘¸é±¼å²ğŸ¶ã€‚

å½“æˆ‘ä»¬åœ¨æ‘¸é±¼æ—¶ï¼Œé¢†å¯¼æ¥äº†ï¼Œéœ€è¦å¿«é€Ÿåˆ‡å±æ—¶ï¼Œéœ€è¦ç”¨åˆ°å¿«æ·é”®ï¼Œä½†å¯èƒ½ä¸€é”®åˆ‡å±æ›´ä¸ºæ–¹ä¾¿ã€‚æ‰€ä»¥æˆ‘ç”¨`robotgo`å®ç°äº†Windowsä¸‹ä¸€é”®åˆ‡å±çš„åŠŸèƒ½ã€‚

ç”±äºä¸ç†Ÿæ‚‰MacOSå’ŒLinuxæ¡Œé¢çš„å¿«æ·é”®ï¼Œè¿™é‡Œåªå®ç°äº†Windowsä¸‹çš„ç¨‹åºï¼Œè¿ç§»åˆ°å…¶å®ƒç³»ç»Ÿä¹Ÿå°±æ”¹ä¸€äº›æŒ‰é”®ï¼Œè¯·è¯»è€…è‡ªè¡Œå®ç°ã€‚

## ä»£ç 

```go
package main

import (
	"flag"
	"fmt"
	"os"
	"runtime"

	"github.com/go-vgo/robotgo"
	hook "github.com/robotn/gohook"
)

var (
	hookKey   = flag.String("k", "space", "è‡ªå®šä¹‰å¿«æ·é”®ï¼Œé»˜è®¤ï¼šspace")
	mode      = flag.Int("m", 1, "è¿è¡Œæ¨¡å¼ï¼Œå¯é€‰å€¼ï¼š1, 2, 3;\n1.å…³é—­åº”ç”¨ã€çª—å£;\n2.ä»…åˆ‡æ¢çª—å£ã€‚\né»˜è®¤1")
	direction = flag.String("d", "left", "åˆ‡æ¢çª—å£çš„æ–¹å‘ï¼Œå¯é€‰å€¼ï¼šleft, rightã€‚é»˜è®¤left")
	needClose = flag.Bool("c", true, "è§¦å‘å¿«æ·é”®åæ˜¯å¦å…³é—­åº”ç”¨ã€‚é»˜è®¤true")
)

func main() {
	if runtime.GOOS != "windows" {
		fmt.Println("ä¸æ”¯æŒçš„æ“ä½œç³»ç»Ÿ")
		return
	}
	flag.Usage = func() {
		fmt.Println("ç”¨æ³•: ./moyu -m [mode] -k [key] -d [direction] -c [close]")
		fmt.Println("mode int \n\tè¿è¡Œæ¨¡å¼ï¼Œå¯é€‰å€¼ï¼š1, 2;\n\t1.å…³é—­åº”ç”¨ã€çª—å£;\n\t2.å…³é—­åº”ç”¨å¹¶åˆ‡æ¢;\n\t3.ä»…åˆ‡æ¢çª—å£ã€‚\n\té»˜è®¤ï¼š1")
		fmt.Println("key string \n\tè‡ªå®šä¹‰å¿«æ·é”®ï¼Œé»˜è®¤ï¼šspace")
		fmt.Println("direction string \n\tåˆ‡æ¢çª—å£çš„æ–¹å‘ï¼Œå¯é€‰å€¼ï¼šleft, rightã€‚é»˜è®¤ï¼šleft")
		fmt.Println("close bool \n\tè§¦å‘å¿«æ·é”®åæ˜¯å¦å…³é—­åº”ç”¨ã€‚é»˜è®¤ï¼štrue")
	}
	flag.Parse()
	hook.Register(hook.KeyDown, []string{*hookKey}, func(e hook.Event) {
		triggerShortcut()
	})
	hook.Register(hook.KeyDown, []string{"esc"}, func(e hook.Event) {
		os.Exit(0)
	})
	s := hook.Start()
	fmt.Println("ç¨‹åºå·²å¯åŠ¨")
	<-hook.Process(s)
}

func onlyChangeWindow(direction string) {
	robotgo.KeyTap(direction, "ctrl", "cmd")
}

func closeAppAndWindow() {
	robotgo.KeyTap("f4", "alt")
	robotgo.KeyTap("f4", "ctrl", "cmd")
}

// è§¦å‘å¿«æ·é”®ç»„åˆ
func triggerShortcut() {
	robotgo.KeyUp(*hookKey)
	switch *mode {
	case 1:
		closeAppAndWindow()
	case 2:
		onlyChangeWindow(*direction)
	}
	if *needClose {
		os.Exit(0)
	}
}
```

## è¯´æ˜

### ç”¨æ³•

` ./moyu -m [mode] -k [key] -d [direction] -c [close]`

#### mode int 
è¿è¡Œæ¨¡å¼ï¼Œå¯é€‰å€¼ï¼š`1, 2`;

1. å…³é—­å½“å‰åº”ç”¨ã€çª—å£;
2. ä»…åˆ‡æ¢çª—å£ã€‚

é»˜è®¤ï¼š`1`ã€‚
#### key string
è‡ªå®šä¹‰å¿«æ·é”®ï¼Œé»˜è®¤ï¼š`space`ã€‚

å…¶ä»–æŒ‰é”®ä»£ç ï¼Œå³ä¸º`robotgo`çš„å®šä¹‰ï¼š

```go
const (
	// KeyA define key "a"
	KeyA = "a"
	KeyB = "b"
	KeyC = "c"
	KeyD = "d"
	KeyE = "e"
	KeyF = "f"
	KeyG = "g"
	KeyH = "h"
	KeyI = "i"
	KeyJ = "j"
	KeyK = "k"
	KeyL = "l"
	KeyM = "m"
	KeyN = "n"
	KeyO = "o"
	KeyP = "p"
	KeyQ = "q"
	KeyR = "r"
	KeyS = "s"
	KeyT = "t"
	KeyU = "u"
	KeyV = "v"
	KeyW = "w"
	KeyX = "x"
	KeyY = "y"
	KeyZ = "z"
	//
	CapA = "A"
	CapB = "B"
	CapC = "C"
	CapD = "D"
	CapE = "E"
	CapF = "F"
	CapG = "G"
	CapH = "H"
	CapI = "I"
	CapJ = "J"
	CapK = "K"
	CapL = "L"
	CapM = "M"
	CapN = "N"
	CapO = "O"
	CapP = "P"
	CapQ = "Q"
	CapR = "R"
	CapS = "S"
	CapT = "T"
	CapU = "U"
	CapV = "V"
	CapW = "W"
	CapX = "X"
	CapY = "Y"
	CapZ = "Z"
	//
	Key0 = "0"
	Key1 = "1"
	Key2 = "2"
	Key3 = "3"
	Key4 = "4"
	Key5 = "5"
	Key6 = "6"
	Key7 = "7"
	Key8 = "8"
	Key9 = "9"

	// Backspace backspace key string
	Backspace = "backspace"
	Delete    = "delete"
	Enter     = "enter"
	Tab       = "tab"
	Esc       = "esc"
	Escape    = "escape"
	Up        = "up"    // Up arrow key
	Down      = "down"  // Down arrow key
	Right     = "right" // Right arrow key
	Left      = "left"  // Left arrow key
	Home      = "home"
	End       = "end"
	Pageup    = "pageup"
	Pagedown  = "pagedown"

	F1  = "f1"
	F2  = "f2"
	F3  = "f3"
	F4  = "f4"
	F5  = "f5"
	F6  = "f6"
	F7  = "f7"
	F8  = "f8"
	F9  = "f9"
	F10 = "f10"
	F11 = "f11"
	F12 = "f12"
	F13 = "f13"
	F14 = "f14"
	F15 = "f15"
	F16 = "f16"
	F17 = "f17"
	F18 = "f18"
	F19 = "f19"
	F20 = "f20"
	F21 = "f21"
	F22 = "f22"
	F23 = "f23"
	F24 = "f24"

	Cmd  = "cmd"  // is the "win" key for windows
	Lcmd = "lcmd" // left command
	Rcmd = "rcmd" // right command
	// "command"
	Alt     = "alt"
	Lalt    = "lalt" // left alt
	Ralt    = "ralt" // right alt
	Ctrl    = "ctrl"
	Lctrl   = "lctrl" // left ctrl
	Rctrl   = "rctrl" // right ctrl
	Control = "control"
	Shift   = "shift"
	Lshift  = "lshift" // left shift
	Rshift  = "rshift" // right shift
	// "right_shift"
	Capslock    = "capslock"
	Space       = "space"
	Print       = "print"
	Printscreen = "printscreen" // No Mac support
	Insert      = "insert"
	Menu        = "menu" // Windows only

	AudioMute    = "audio_mute"     // Mute the volume
	AudioVolDown = "audio_vol_down" // Lower the volume
	AudioVolUp   = "audio_vol_up"   // Increase the volume
	AudioPlay    = "audio_play"
	AudioStop    = "audio_stop"
	AudioPause   = "audio_pause"
	AudioPrev    = "audio_prev"    // Previous Track
	AudioNext    = "audio_next"    // Next Track
	AudioRewind  = "audio_rewind"  // Linux only
	AudioForward = "audio_forward" // Linux only
	AudioRepeat  = "audio_repeat"  //  Linux only
	AudioRandom  = "audio_random"  //  Linux only

	Num0    = "num0" // numpad 0
	Num1    = "num1"
	Num2    = "num2"
	Num3    = "num3"
	Num4    = "num4"
	Num5    = "num5"
	Num6    = "num6"
	Num7    = "num7"
	Num8    = "num8"
	Num9    = "num9"
	NumLock = "num_lock"

	NumDecimal = "num."
	NumPlus    = "num+"
	NumMinus   = "num-"
	NumMul     = "num*"
	NumDiv     = "num/"
	NumClear   = "num_clear"
	NumEnter   = "num_enter"
	NumEqual   = "num_equal"

	LightsMonUp     = "lights_mon_up"     // Turn up monitor brightness			No Windows support
	LightsMonDown   = "lights_mon_down"   // Turn down monitor brightness		No Windows support
	LightsKbdToggle = "lights_kbd_toggle" // Toggle keyboard backlight on/off		No Windows support
	LightsKbdUp     = "lights_kbd_up"     // Turn up keyboard backlight brightness	No Windows support
	LightsKbdDown   = "lights_kbd_down"
)
```

#### direction string
åˆ‡æ¢çª—å£çš„æ–¹å‘ï¼Œå¯é€‰å€¼ï¼š`left, right`ã€‚é»˜è®¤ï¼š`left`ã€‚

#### close bool
è§¦å‘å¿«æ·é”®åæ˜¯å¦å…³é—­åº”ç”¨ã€‚é»˜è®¤ï¼š`true`ã€‚

é»˜è®¤å‚æ•°é€‚åˆçª—å£1å·¥ä½œï¼Œçª—å£2å¼€å¯ä¸€ä¸ªæ‘¸é±¼ç¨‹åºï¼Œè§¦å‘å¿«æ·é”®åä¼šå…³é—­å½“å‰æ‘¸é±¼ç¨‹åºï¼Œå…³é—­çª—å£2ï¼Œç³»ç»Ÿä¼šæ˜¾ç¤ºçª—å£1ã€‚

### å»ºè®®

1. å…³é—­ç¨‹åºåªå…³é—­äº†å½“å‰ç¨‹åºï¼Œæ‰€ä»¥å°½é‡æ‘¸é±¼çª—å£åªæ‰§è¡Œä¸€ä¸ªæ‘¸é±¼ç¨‹åºã€‚**å¦‚æœæ‰§è¡Œå¤šä¸ªæ‘¸é±¼ç¨‹åºä¸è¦ä½¿ç”¨æ¨¡å¼1ï¼Œå¦åˆ™å…¶ä»–æ‘¸é±¼ç¨‹åºä¼šç§»åŠ¨åˆ°ä¸»çª—å£ã€‚**
2. æ¨¡å¼1è¾ƒä¸ºå½»åº•ï¼Œé€‚ç”¨äºé•¿æœŸä¸å†å…·æœ‰æ‘¸é±¼æ¡ä»¶ã€‚
3. æ¨¡å¼2é€‚åˆçŸ­æœŸåæ‘¸é±¼æ¡ä»¶æ¢å¤ã€‚
4. ä¸ªäººæ„Ÿè§‰ï¼Œæ¨¡å¼1å…³é—­çª—å£åŠ¨ç”»å’Œæ¨¡å¼2çš„åˆ‡æ¢åŠ¨ç”»ç›¸æ¯”ä¸é‚£ä¹ˆæ˜¾çœ¼ã€‚
5. å»ºè®®å¼€å¯è§¦å‘å¿«æ·é”®åå…³é—­åº”ç”¨ï¼Œä»¥å…é¢†å¯¼é¢å‰å·¥ä½œæ—¶è§¦å‘ç¨‹åºã€‚

## ä¸‹è½½

ç‚¹å‡»[ä¸‹è½½é“¾æ¥](https://static.likeit.dev/tools/moyu/moyu_0.1_windows_x86-64.exe)å³å¯ä¸‹è½½ã€‚